#!/bin/bash

# Funciรณn para mostrar ayuda
show_usage() {
    echo -e "\e[1;35m
  โโโโโโโ โโโโโโโโโโ      โโโโโโโโโโ     โโโโโโโโ โโโโโโ โโโโ   โโโโโโโโโโโโโโโโโโ 
  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโ
  โโโโโโโโโโโโโโโโโโโ    โโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโ โโโโโโโโโ  โโโโโโโโ
  โโโโโโโโโโโโโโโโโโ     โโโ     โโโ     โโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโ
  โโโ  โโโโโโโโโ         โโโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโ โโโโโโโโโโโโโโโโโ  โโโ
  โโโ  โโโโโโโโโ          โโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโ  โโโโโโโโโโโโโโโโ  โโโ
  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   ๐๐๐๐๐ ๐๐ฃ ๐ฎ๐ค๐ช๐ง ๐ง๐๐ฅ๐จ โจ ๐๐๐๐ข๐ก๐๐จ๐จ ๐๐๐ฉ๐๐๐๐จ๐ ๐ข๐๐๐ฃ๐ฉ๐๐ฃ๐๐ฃ๐๐ ๐๐ช๐ฉ๐ค๐ข๐๐๐๐
  clear-rips: $0 --DB_NAME=<nombre_bd> --USER=<usuario> --PORT=<puerto> 
       --HOST=<host> --PASSWORD=<contraseรฑa> 
       [--import_data --ARCHIVO_CSV=<ruta>]
\e[0m"
    exit 0
}

# Funciรณn para validar parรกmetros requeridos
validate_params() {
    if [[ -z "$1" || -z "$2" || -z "$3" || -z "$4" || -z "$5" ]]; then
        echo "โ Error: Faltan parรกmetros de conexiรณn."
        show_usage
    fi
}

# Validar parรกmetros de importaciรณn
validate_import_params() {
    if [[ -z "$1" ]]; then
        echo "โ Error: Falta --ARCHIVO_CSV en modo importaciรณn."
        show_usage
    fi
}

# Verificar conexiรณn a PostgreSQL
check_connection() {
    PGPASSWORD="$5" psql -U "$2" -h "$3" -p "$4" -d "$1" -c "SELECT 1;" &>/dev/null
    if [[ $? -ne 0 ]]; then
        echo "โ Error: No se pudo conectar a la base de datos."
        exit 1
    fi
    echo "โ Conexiรณn exitosa."
}
